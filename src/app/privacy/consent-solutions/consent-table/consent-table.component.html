<div class="container">
<div class="mb-3">
  <nav aria-label="breadcrumb" class="align-navbtn">
    <ol class="breadcrumb breadcrumb-style1 mg-b-0">
      <li class="breadcrumb-item">Privacy</li>
      <li class="breadcrumb-item">Consent Solutions</li>
      <li class="breadcrumb-item active" aria-current="page">Consent Records</li>
    </ol>
  </nav>

</div>




<div class="card">
  <div class="card-header row ml-1 mr-1">
    <h4 class="headings col-md-10">Consent Records </h4>
    <button type="button"  *ngIf="!showFilters" (click)="showFilters = !showFilters" class=" btn btn-primary col-md-2 btn-sm filbutton">Show Filters</button>
    <button type="button"  *ngIf="showFilters" (click)="showFilters = !showFilters" class=" btn btn-primary col-md-2 btn-sm filbutton">Hide Filters</button>
  </div>


  <div class="card-body">
    <div class="filter" *ngIf="showFilters">
    <div>
      <label><b>Search Filters</b></label>
    </div>
    <div style="margin-top: 1px; justify-content: space-between;" class="d-flex mb-3 fil" >
      <!-- <span class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input type="text"    (keyup)="onSearchInputChange($event)" pInputText placeholder="Search">
    </span> -->
      <input style="margin-left:2px; width:230px;" class="txtfil" (keyup)="onEmailInputChange($event)" type="text" pInputText placeholder="Email" />
      <input style="margin-left:2px; width:230px;" class="txtfil"   (keyup)="onFirstNameInputChange($event)"type="text" pInputText placeholder="First Name"/>
      <input style="margin-left:2px; width:230px;" class="txtfil"  (keyup)="onLastNameInputChange($event)" type="text" pInputText  placeholder="Last Name"/>
      <input style="margin-left:2px; width:230px;" class="txtfil"  (keyup)="onIpAddressInputChange($event)" type="text" pInputText placeholder="Ip Address"/>
      <!-- <input style="margin-left:3px; width:160px;" type="text" pInputText placeholder="Source"/>   -->

    </div>
    <div class="d-flex" style="justify-content: space-between;">
      <div class="mt-1">
        <label><b>Source</b></label>
      </div>
      </div>
      <div class="d-flex" style="justify-content: space-between;">
        <div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" (click)="onSourceInputChange($event)" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="both">
        <label class="form-check-label" for="inlineRadio1">Both</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" (click)="onSourceInputChange($event)" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="private">
        <label class="form-check-label" for="inlineRadio2">Private</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input"  (click)="onSourceInputChange($event)" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="public">
        <label class="form-check-label" for="inlineRadio2">Public</label>
      </div>
    </div>


        <div class="col-sm-4 pr-0 mr-2 d-flex row-reverse">
          <div class="input-group-prepend"  (click)="dp.show()">
            <span class="input-group-text rounded-right border-left-0" id="inputGroup-sizing-sm"><i class="fa" [ngClass]="searchbydaterange !== '' ? 'fa-caret-down':'fa-search'"></i></span>
          </div>
          <input type="text" [(ngModel)]="searchbydaterange"
                 class="form-control border-left-0  border-right-0 rounded-right"
                 bsDaterangepicker [bsConfig]="bsConfig"  #dp="bsDaterangepicker"  (onHidden)="onDateSelection()">
          <div class="input-group-prepend border-left-0"  (click)="dp.show()">
            <span class="input-group-text rounded-left border-right-0" id="inputGroup-sizing-sm"><i class="fa fa-calendar"></i></span>
          </div>
        </div>


    </div>
    </div>
    <hr>
    <div class="card">
      <p-table [value]="consentRecordList"
               [lazy]="true" [responsive]="true"
               [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
               [totalRecords]="consentRecordCount"
               currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
               [rowsPerPageOptions]="[10,20,30]"
               (onLazyLoad)="onGetConsentSolutionData($event)"
               styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
          <tr style="text-align:center;">
            <th>ID</th>
            <th>Owner ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Country</th>
            <th>Data Source</th>
            <th>IP Address</th>
            <th>Verified</th>
            <th>Created Date</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-consentRecord>
          <tr>
            <td class="al"><a href="javascript:;" (click)="onNavigateToDetails(consentRecord)">{{consentRecord.id}}</a></td>
            <td class="al">{{consentRecord.owner_id}}</td>
            <td class="al">{{consentRecord.first_name}}</td>
            <td class="al">{{consentRecord.last_name}}</td>
            <td class="al">{{consentRecord.email}}</td>
            <td class="al">{{consentRecord.country}}</td>
            <td class="al">{{consentRecord.data_source}}</td>
            <td class="al">{{consentRecord.ip_address}}</td>
            <td class="al">
              <ng-container *ngIf="consentRecord.verified;else elseBlock">
                <i class="pi pi-check" style="font-size: 1.0rem; color:#5cb85c;"></i>
              </ng-container>
              <ng-template #elseBlock><i class="pi pi-times" style="font-size: 1.0rem; color: #d9534f;"></i>
              </ng-template>
            </td>
            <td class="al">{{consentRecord.created_at | date}}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
</div>


