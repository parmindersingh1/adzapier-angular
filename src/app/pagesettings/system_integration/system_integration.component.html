<!--<app-mysql-form></app-mysql-form>-->


<div class="card">
  <div class="card-header">
    <h4 class="float-left pt-2">System Integration</h4>
    <button class="btn btn-primary float-right" (click)="openModal(template)">Create Connection</button>
  </div>
  <div class="card-body">
    <p-table [columns]="cols" [value]="connectionList" [scrollable]="true" [rows]="100" scrollHeight="250px"
             [virtualScroll]="true" [virtualRowHeight]="40" [lazy]="true" (onLazyLoad)="loadCarsLazy($event)">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th>ID</th>
          <th>Connection Name</th>
          <th>Description</th>
          <th>System Type</th>
          <th>Created</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr style="height:40px">
          <td>{{rowData.id}}</td>
          <td>{{rowData.name}}</td>
          <td>{{rowData.description}}</td>
          <td>{{rowData.system_type}}</td>
          <td>{{rowData.created_at}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="loadingbody" let-columns="columns">
        <tr style="height:40px">
          <td *ngFor="let col of columns">
            <div class="loading-text"></div>
            <p-skeleton [ngStyle]="{'width': '100%'}"></p-skeleton>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>








<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title text-center margin-auto">Create Connection</h4>
    <button type="button" class="close pull-right ml-0" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="step-1" *ngIf="step === 1">
      <div class="list-group">
        <div class="row">
            <ng-container *ngFor="let obj of systemList">
              <div class="col-md-4 mb-3">
              <a href="javascript:;" (click)="onSelectSystem(obj, 2)" class="list-group-item list-group-item-action">
                <span *ngIf="obj.name ==='mysql'"><img style="width:  90px" src="assets/imgs/db/mysql.png" alt="mysql" /></span>
                <span *ngIf="obj.name ==='mailchimp'"><img style="width:  180px" src="assets/imgs/db/mailchimp.png" alt="mailchimp" /></span>
                <span *ngIf="obj.name ==='postgresql'"><img style="width:  180px" src="assets/imgs/db/PostgreSQL.png" alt="postgresql" /></span>
                <span *ngIf="obj.name ==='http'"><img style="width:  97px; height: 60px" src="assets/imgs/db/rest.png" alt="rest" /></span>
<!--                <span *ngIf="obj.name !=='mailchimp'" class="tx-18 pl-3">{{obj.name}} </span>-->
              </a>
              </div>
            </ng-container>
          </div>


      </div>
    </div>
    <ng-container *ngIf="step === 2">
      <app-mysql-form [systemID]="currentSystem.id" [systemName]="currentSystem.name" *ngIf="currentSystem.name === 'mysql'"></app-mysql-form>
    </ng-container>
  </div>
</ng-template>
